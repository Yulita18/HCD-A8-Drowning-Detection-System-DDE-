{"id":"oJbk","dependencies":[{"name":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\package.json","includedInParent":true,"mtime":1637137578035},{"name":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\.babelrc","includedInParent":true,"mtime":1634828519177},{"name":"@tensorflow/tfjs-core","loc":{"line":26,"column":30},"parent":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\shared\\calculators\\convert_image_to_tensor.ts","resolved":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow\\tfjs-core\\dist\\index.js"},{"name":"./image_utils","loc":{"line":27,"column":28},"parent":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\shared\\calculators\\convert_image_to_tensor.ts","resolved":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\shared\\calculators\\image_utils.ts"}],"generated":{"js":"\"use strict\";var e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r};exports.__esModule=!0;var r=e(require(\"@tensorflow/tfjs-core\")),t=require(\"./image_utils\");function i(e,i,o){var a=i.inputResolution,n=i.keepAspectRatio,s=t.getImageSize(e),u=t.getRoi(s,o),f=t.padRoi(u,a,n);return{imageTensor:r.tidy(function(){var i=t.toImageTensor(e),o=r.tensor2d(t.getProjectiveTransformMatrix(u,s,!1,a),[1,8]);return r.image.transform(r.expandDims(r.cast(i,\"float32\")),o,\"bilinear\",\"nearest\",0,[a.height,a.width])}),padding:f}}exports.convertImageToTensor=i;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":1,"column":208}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":1,"column":212}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":1,"column":214}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":1,"column":216}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":1,"column":224}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":250}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":252}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":260}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":35,"column":0},"generated":{"line":1,"column":277}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":35,"column":16},"generated":{"line":1,"column":286}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":36,"column":4},"generated":{"line":1,"column":288}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":36,"column":26},"generated":{"line":1,"column":290}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":37,"column":4},"generated":{"line":1,"column":292}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":38,"column":9},"generated":{"line":1,"column":295}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":38,"column":9},"generated":{"line":1,"column":299}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":38,"column":9},"generated":{"line":1,"column":301}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":38,"column":9},"generated":{"line":1,"column":303}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":38,"column":26},"generated":{"line":1,"column":319}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":38,"column":26},"generated":{"line":1,"column":321}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":38,"column":26},"generated":{"line":1,"column":323}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":42,"column":8},"generated":{"line":1,"column":339}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":42,"column":20},"generated":{"line":1,"column":341}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":42,"column":20},"generated":{"line":1,"column":343}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":42,"column":33},"generated":{"line":1,"column":356}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":43,"column":8},"generated":{"line":1,"column":359}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":43,"column":14},"generated":{"line":1,"column":361}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":43,"column":14},"generated":{"line":1,"column":363}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":43,"column":21},"generated":{"line":1,"column":370}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":43,"column":32},"generated":{"line":1,"column":372}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":44,"column":8},"generated":{"line":1,"column":375}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":44,"column":18},"generated":{"line":1,"column":377}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":44,"column":18},"generated":{"line":1,"column":379}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":44,"column":25},"generated":{"line":1,"column":386}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":44,"column":30},"generated":{"line":1,"column":388}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":44,"column":47},"generated":{"line":1,"column":390}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":62,"column":2},"generated":{"line":1,"column":393}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":62,"column":9},"generated":{"line":1,"column":399}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":62,"column":10},"generated":{"line":1,"column":400}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":46,"column":22},"generated":{"line":1,"column":412}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":46,"column":25},"generated":{"line":1,"column":414}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":46,"column":30},"generated":{"line":1,"column":419}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":47,"column":4},"generated":{"line":1,"column":430}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":47,"column":10},"generated":{"line":1,"column":434}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":47,"column":19},"generated":{"line":1,"column":436}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":47,"column":19},"generated":{"line":1,"column":438}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":47,"column":33},"generated":{"line":1,"column":452}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":49,"column":10},"generated":{"line":1,"column":455}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":49,"column":28},"generated":{"line":1,"column":457}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":49,"column":31},"generated":{"line":1,"column":459}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":50,"column":8},"generated":{"line":1,"column":468}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":50,"column":8},"generated":{"line":1,"column":470}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":50,"column":37},"generated":{"line":1,"column":499}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":50,"column":42},"generated":{"line":1,"column":501}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":50,"column":53},"generated":{"line":1,"column":504}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":50,"column":60},"generated":{"line":1,"column":506}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":51,"column":8},"generated":{"line":1,"column":509}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":51,"column":9},"generated":{"line":1,"column":510}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":51,"column":12},"generated":{"line":1,"column":512}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":59,"column":4},"generated":{"line":1,"column":516}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":53,"column":29},"generated":{"line":1,"column":523}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":53,"column":32},"generated":{"line":1,"column":525}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":53,"column":38},"generated":{"line":1,"column":531}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":55,"column":8},"generated":{"line":1,"column":541}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":55,"column":11},"generated":{"line":1,"column":543}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":1,"column":554}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":55,"column":25},"generated":{"line":1,"column":556}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":55,"column":30},"generated":{"line":1,"column":561}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":55,"column":38},"generated":{"line":1,"column":563}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":56,"column":8},"generated":{"line":1,"column":575}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":56,"column":25},"generated":{"line":1,"column":577}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":56,"column":37},"generated":{"line":1,"column":588}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":56,"column":48},"generated":{"line":1,"column":598}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":57,"column":8},"generated":{"line":1,"column":600}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":57,"column":9},"generated":{"line":1,"column":601}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":57,"column":25},"generated":{"line":1,"column":603}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":57,"column":33},"generated":{"line":1,"column":610}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":57,"column":49},"generated":{"line":1,"column":612}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":62,"column":23},"generated":{"line":1,"column":622}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":62,"column":30},"generated":{"line":1,"column":630}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":35,"column":0},"generated":{"line":1,"column":633}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":35,"column":0},"generated":{"line":1,"column":641}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts","name":null,"original":{"line":35,"column":0},"generated":{"line":1,"column":662}}],"sources":{"node_modules/@tensorflow-models/pose-detection/shared/calculators/convert_image_to_tensor.ts":"/**\r\n * @license\r\n * Copyright 2021 Google LLC. All Rights Reserved.\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * https://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * =============================================================================\r\n */\r\nimport * as tf from '@tensorflow/tfjs-core';\r\n\r\nimport {getImageSize, getProjectiveTransformMatrix, getRoi, padRoi, toImageTensor} from './image_utils';\r\nimport {DetectorInput, Padding} from './interfaces/common_interfaces';\r\nimport {ImageToTensorConfig} from './interfaces/config_interfaces';\r\nimport {Rect} from './interfaces/shape_interfaces';\r\n\r\n/**\r\n * Convert an image or part of it to an image tensor.\r\n *\r\n * @param image An image, video frame or image tensor.\r\n * @param config\r\n *      inputResolution: The target height and width.\r\n *      keepAspectRatio?: Whether target tensor should keep aspect ratio.\r\n * @param normRect A normalized rectangle, representing the subarea to crop from\r\n *      the image. If normRect is provided, the returned image tensor represents\r\n *      the subarea.\r\n */\r\nexport function convertImageToTensor(\r\n    image: DetectorInput, config: ImageToTensorConfig,\r\n    normRect?: Rect): {imageTensor: tf.Tensor4D, padding: Padding} {\r\n  const {inputResolution, keepAspectRatio} = config;\r\n\r\n  // Ref:\r\n  // https://github.com/google/mediapipe/blob/master/mediapipe/calculators/tensor/image_to_tensor_calculator.cc\r\n  const imageSize = getImageSize(image);\r\n  const roi = getRoi(imageSize, normRect);\r\n  const padding = padRoi(roi, inputResolution, keepAspectRatio);\r\n\r\n  const imageTensor = tf.tidy(() => {\r\n    const $image = toImageTensor(image);\r\n\r\n    const transformMatrix = tf.tensor2d(\r\n        getProjectiveTransformMatrix(roi, imageSize, false, inputResolution),\r\n        [1, 8]);\r\n\r\n    const imageTransformed = tf.image.transform(\r\n        // tslint:disable-next-line: no-unnecessary-type-assertion\r\n        tf.expandDims(tf.cast($image, 'float32')) as tf.Tensor4D,\r\n        transformMatrix, 'bilinear', 'nearest', 0,\r\n        [inputResolution.height, inputResolution.width]);\r\n\r\n    return imageTransformed;\r\n  });\r\n\r\n  return {imageTensor, padding};\r\n}\r\n"},"lineCount":null}},"error":null,"hash":"dc1368e4f2d2c6cafccce870aaa44ffa","cacheData":{"env":{}}}