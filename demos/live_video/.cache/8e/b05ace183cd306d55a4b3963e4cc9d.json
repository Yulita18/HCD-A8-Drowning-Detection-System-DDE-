{"id":"mZx1","dependencies":[{"name":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\calculators\\keypoint_tracker.js.map","includedInParent":true,"mtime":1636860948073},{"name":"C:\\xampp\\htdocs\\pose-detection\\src\\calculators\\keypoint_tracker.ts","includedInParent":true,"mtime":1636643613039},{"name":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\package.json","includedInParent":true,"mtime":1636883241532},{"name":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\.babelrc","includedInParent":true,"mtime":1634828519177},{"name":"./tracker","loc":{"line":32,"column":24},"parent":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\calculators\\keypoint_tracker.js","resolved":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\calculators\\tracker.js"}],"generated":{"js":"\"use strict\";var t=this&&this.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(exports,\"__esModule\",{value:!0});var r=require(\"./tracker\"),e=function(r){function e(t){var e=r.call(this,t)||this;return e.keypointThreshold=t.keypointTrackerParams.keypointConfidenceThreshold,e.keypointFalloff=t.keypointTrackerParams.keypointFalloff,e.minNumKeyoints=t.keypointTrackerParams.minNumberOfKeypoints,e}return t(e,r),e.prototype.computeSimilarity=function(t){if(0===t.length||0===this.tracks.length)return[[]];for(var r=[],e=0,n=t;e<n.length;e++){for(var o=n[e],a=[],i=0,p=this.tracks;i<p.length;i++){var s=p[i];a.push(this.oks(o,s))}r.push(a)}return r},e.prototype.oks=function(t,r){for(var e=this.area(r.keypoints)+1e-6,n=0,o=0,a=0;a<t.keypoints.length;++a){var i=t.keypoints[a],p=r.keypoints[a];if(!(i.score<this.keypointThreshold||p.score<this.keypointThreshold)){o+=1;var s=Math.pow(i.x-p.x,2)+Math.pow(i.y-p.y,2),c=2*this.keypointFalloff[a];n+=Math.exp(-1*s/(2*e*Math.pow(c,2)))}}return o<this.minNumKeyoints?0:n/o},e.prototype.area=function(t){var r=this,e=t.filter(function(t){return t.score>r.keypointThreshold}),n=Math.min.apply(Math,[1].concat(e.map(function(t){return t.x}))),o=Math.max.apply(Math,[0].concat(e.map(function(t){return t.x}))),a=Math.min.apply(Math,[1].concat(e.map(function(t){return t.y})));return(o-n)*(Math.max.apply(Math,[0].concat(e.map(function(t){return t.y})))-a)},e}(r.Tracker);exports.KeypointTracker=e;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":425}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":429}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":431}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":439}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":452}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":454}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":463}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":36,"column":2},"generated":{"line":1,"column":466}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":36,"column":2},"generated":{"line":1,"column":475}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":36,"column":14},"generated":{"line":1,"column":477}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":36,"column":2},"generated":{"line":1,"column":480}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":36,"column":2},"generated":{"line":1,"column":484}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":37,"column":4},"generated":{"line":1,"column":486}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":37,"column":4},"generated":{"line":1,"column":488}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":37,"column":4},"generated":{"line":1,"column":493}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":37,"column":10},"generated":{"line":1,"column":498}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":37,"column":17},"generated":{"line":1,"column":502}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":38,"column":4},"generated":{"line":1,"column":514}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":38,"column":9},"generated":{"line":1,"column":516}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":39,"column":8},"generated":{"line":1,"column":534}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":39,"column":15},"generated":{"line":1,"column":536}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":39,"column":37},"generated":{"line":1,"column":558}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":40,"column":4},"generated":{"line":1,"column":586}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":40,"column":9},"generated":{"line":1,"column":588}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":40,"column":27},"generated":{"line":1,"column":604}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":40,"column":34},"generated":{"line":1,"column":606}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":40,"column":56},"generated":{"line":1,"column":628}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":41,"column":4},"generated":{"line":1,"column":644}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":41,"column":9},"generated":{"line":1,"column":646}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":41,"column":26},"generated":{"line":1,"column":661}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":41,"column":33},"generated":{"line":1,"column":663}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":41,"column":55},"generated":{"line":1,"column":685}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":122,"column":0},"generated":{"line":1,"column":708}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":31,"column":37},"generated":{"line":1,"column":715}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":31,"column":37},"generated":{"line":1,"column":717}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":31,"column":37},"generated":{"line":1,"column":719}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":49,"column":2},"generated":{"line":1,"column":722}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":49,"column":2},"generated":{"line":1,"column":724}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":49,"column":2},"generated":{"line":1,"column":734}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":49,"column":2},"generated":{"line":1,"column":752}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":49,"column":20},"generated":{"line":1,"column":761}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":50,"column":4},"generated":{"line":1,"column":764}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":50,"column":25},"generated":{"line":1,"column":767}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":50,"column":8},"generated":{"line":1,"column":771}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":50,"column":14},"generated":{"line":1,"column":773}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":50,"column":53},"generated":{"line":1,"column":781}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":50,"column":30},"generated":{"line":1,"column":785}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":50,"column":35},"generated":{"line":1,"column":790}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":50,"column":42},"generated":{"line":1,"column":797}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":51,"column":6},"generated":{"line":1,"column":804}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":51,"column":13},"generated":{"line":1,"column":810}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":51,"column":14},"generated":{"line":1,"column":811}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":55,"column":4},"generated":{"line":1,"column":815}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":54,"column":4},"generated":{"line":1,"column":819}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":54,"column":10},"generated":{"line":1,"column":823}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":54,"column":22},"generated":{"line":1,"column":825}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":55,"column":23},"generated":{"line":1,"column":828}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":55,"column":23},"generated":{"line":1,"column":830}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":55,"column":23},"generated":{"line":1,"column":832}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":55,"column":23},"generated":{"line":1,"column":834}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":55,"column":23},"generated":{"line":1,"column":836}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":55,"column":23},"generated":{"line":1,"column":838}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":55,"column":23},"generated":{"line":1,"column":840}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":55,"column":23},"generated":{"line":1,"column":847}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":55,"column":30},"generated":{"line":1,"column":851}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":57,"column":6},"generated":{"line":1,"column":852}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":55,"column":9},"generated":{"line":1,"column":856}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":55,"column":15},"generated":{"line":1,"column":860}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":55,"column":19},"generated":{"line":1,"column":862}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":55,"column":19},"generated":{"line":1,"column":864}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":56,"column":12},"generated":{"line":1,"column":867}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":56,"column":18},"generated":{"line":1,"column":869}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":57,"column":26},"generated":{"line":1,"column":872}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":57,"column":26},"generated":{"line":1,"column":874}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":57,"column":26},"generated":{"line":1,"column":876}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":57,"column":26},"generated":{"line":1,"column":878}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":57,"column":31},"generated":{"line":1,"column":883}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":57,"column":26},"generated":{"line":1,"column":890}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":57,"column":26},"generated":{"line":1,"column":892}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":57,"column":26},"generated":{"line":1,"column":894}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":57,"column":26},"generated":{"line":1,"column":901}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":57,"column":39},"generated":{"line":1,"column":905}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":57,"column":11},"generated":{"line":1,"column":906}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":57,"column":17},"generated":{"line":1,"column":910}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":57,"column":22},"generated":{"line":1,"column":912}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":57,"column":22},"generated":{"line":1,"column":914}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":58,"column":8},"generated":{"line":1,"column":917}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":58,"column":12},"generated":{"line":1,"column":919}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":58,"column":17},"generated":{"line":1,"column":924}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":58,"column":22},"generated":{"line":1,"column":929}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":58,"column":26},"generated":{"line":1,"column":933}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":58,"column":32},"generated":{"line":1,"column":935}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":1,"column":939}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":60,"column":16},"generated":{"line":1,"column":941}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":60,"column":21},"generated":{"line":1,"column":946}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":62,"column":4},"generated":{"line":1,"column":949}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":62,"column":11},"generated":{"line":1,"column":956}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":85,"column":10},"generated":{"line":1,"column":959}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":85,"column":10},"generated":{"line":1,"column":961}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":85,"column":10},"generated":{"line":1,"column":971}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":85,"column":2},"generated":{"line":1,"column":975}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":85,"column":14},"generated":{"line":1,"column":984}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":85,"column":26},"generated":{"line":1,"column":986}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":89,"column":4},"generated":{"line":1,"column":989}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":86,"column":4},"generated":{"line":1,"column":993}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":86,"column":10},"generated":{"line":1,"column":997}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":86,"column":20},"generated":{"line":1,"column":999}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":86,"column":25},"generated":{"line":1,"column":1004}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":86,"column":30},"generated":{"line":1,"column":1009}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":86,"column":36},"generated":{"line":1,"column":1011}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":86,"column":49},"generated":{"line":1,"column":1022}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":87,"column":8},"generated":{"line":1,"column":1027}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":87,"column":19},"generated":{"line":1,"column":1029}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":88,"column":8},"generated":{"line":1,"column":1031}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":88,"column":28},"generated":{"line":1,"column":1033}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":89,"column":13},"generated":{"line":1,"column":1035}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":89,"column":17},"generated":{"line":1,"column":1037}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":89,"column":20},"generated":{"line":1,"column":1039}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":89,"column":24},"generated":{"line":1,"column":1041}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":89,"column":29},"generated":{"line":1,"column":1043}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":89,"column":39},"generated":{"line":1,"column":1053}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":89,"column":49},"generated":{"line":1,"column":1062}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":89,"column":52},"generated":{"line":1,"column":1064}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":90,"column":6},"generated":{"line":1,"column":1065}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":90,"column":12},"generated":{"line":1,"column":1069}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":90,"column":22},"generated":{"line":1,"column":1071}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":90,"column":27},"generated":{"line":1,"column":1073}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":90,"column":37},"generated":{"line":1,"column":1083}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":91,"column":12},"generated":{"line":1,"column":1086}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":91,"column":23},"generated":{"line":1,"column":1088}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":91,"column":29},"generated":{"line":1,"column":1090}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":91,"column":39},"generated":{"line":1,"column":1100}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":92,"column":6},"generated":{"line":1,"column":1103}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":92,"column":10},"generated":{"line":1,"column":1108}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":92,"column":18},"generated":{"line":1,"column":1110}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":92,"column":26},"generated":{"line":1,"column":1116}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":92,"column":31},"generated":{"line":1,"column":1121}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":93,"column":10},"generated":{"line":1,"column":1140}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":93,"column":19},"generated":{"line":1,"column":1142}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":93,"column":27},"generated":{"line":1,"column":1148}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":93,"column":32},"generated":{"line":1,"column":1153}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":92,"column":6},"generated":{"line":1,"column":1172}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":96,"column":6},"generated":{"line":1,"column":1173}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":96,"column":27},"generated":{"line":1,"column":1176}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":97,"column":6},"generated":{"line":1,"column":1178}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":97,"column":12},"generated":{"line":1,"column":1182}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":97,"column":23},"generated":{"line":1,"column":1184}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":97,"column":28},"generated":{"line":1,"column":1189}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":97,"column":32},"generated":{"line":1,"column":1193}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":97,"column":40},"generated":{"line":1,"column":1195}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":97,"column":44},"generated":{"line":1,"column":1197}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":97,"column":53},"generated":{"line":1,"column":1199}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":97,"column":56},"generated":{"line":1,"column":1201}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":98,"column":10},"generated":{"line":1,"column":1204}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":98,"column":15},"generated":{"line":1,"column":1209}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":98,"column":19},"generated":{"line":1,"column":1213}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":98,"column":27},"generated":{"line":1,"column":1215}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":98,"column":31},"generated":{"line":1,"column":1217}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":98,"column":40},"generated":{"line":1,"column":1219}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":98,"column":43},"generated":{"line":1,"column":1221}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":99,"column":12},"generated":{"line":1,"column":1224}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":99,"column":16},"generated":{"line":1,"column":1226}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":99,"column":20},"generated":{"line":1,"column":1228}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":99,"column":25},"generated":{"line":1,"column":1233}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":99,"column":41},"generated":{"line":1,"column":1249}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":100,"column":6},"generated":{"line":1,"column":1252}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":100,"column":18},"generated":{"line":1,"column":1255}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":100,"column":23},"generated":{"line":1,"column":1260}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":100,"column":28},"generated":{"line":1,"column":1265}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":100,"column":32},"generated":{"line":1,"column":1267}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":100,"column":44},"generated":{"line":1,"column":1270}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":100,"column":48},"generated":{"line":1,"column":1272}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":100,"column":58},"generated":{"line":1,"column":1274}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":100,"column":58},"generated":{"line":1,"column":1279}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":100,"column":58},"generated":{"line":1,"column":1283}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":100,"column":63},"generated":{"line":1,"column":1285}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":102,"column":4},"generated":{"line":1,"column":1291}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":102,"column":8},"generated":{"line":1,"column":1298}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":102,"column":28},"generated":{"line":1,"column":1300}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":102,"column":33},"generated":{"line":1,"column":1305}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":103,"column":13},"generated":{"line":1,"column":1320}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":105,"column":11},"generated":{"line":1,"column":1322}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":105,"column":22},"generated":{"line":1,"column":1324}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":113,"column":10},"generated":{"line":1,"column":1327}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":113,"column":10},"generated":{"line":1,"column":1329}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":113,"column":10},"generated":{"line":1,"column":1339}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":113,"column":2},"generated":{"line":1,"column":1344}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":113,"column":15},"generated":{"line":1,"column":1353}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":113,"column":2},"generated":{"line":1,"column":1356}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":113,"column":2},"generated":{"line":1,"column":1360}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":113,"column":2},"generated":{"line":1,"column":1362}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":114,"column":10},"generated":{"line":1,"column":1367}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":115,"column":8},"generated":{"line":1,"column":1369}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":115,"column":18},"generated":{"line":1,"column":1371}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":115,"column":25},"generated":{"line":1,"column":1378}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":115,"column":25},"generated":{"line":1,"column":1387}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":115,"column":32},"generated":{"line":1,"column":1390}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":115,"column":32},"generated":{"line":1,"column":1397}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":115,"column":36},"generated":{"line":1,"column":1399}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":115,"column":44},"generated":{"line":1,"column":1405}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":115,"column":49},"generated":{"line":1,"column":1407}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":116,"column":10},"generated":{"line":1,"column":1427}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":116,"column":17},"generated":{"line":1,"column":1429}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":116,"column":22},"generated":{"line":1,"column":1434}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":116,"column":25},"generated":{"line":1,"column":1438}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":116,"column":17},"generated":{"line":1,"column":1444}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":116,"column":21},"generated":{"line":1,"column":1449}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":116,"column":26},"generated":{"line":1,"column":1450}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":116,"column":29},"generated":{"line":1,"column":1453}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":116,"column":34},"generated":{"line":1,"column":1460}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":116,"column":48},"generated":{"line":1,"column":1462}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":116,"column":52},"generated":{"line":1,"column":1466}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":116,"column":52},"generated":{"line":1,"column":1475}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":116,"column":59},"generated":{"line":1,"column":1478}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":116,"column":59},"generated":{"line":1,"column":1485}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":116,"column":63},"generated":{"line":1,"column":1487}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":117,"column":10},"generated":{"line":1,"column":1493}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":117,"column":17},"generated":{"line":1,"column":1495}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":117,"column":22},"generated":{"line":1,"column":1500}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":117,"column":25},"generated":{"line":1,"column":1504}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":117,"column":17},"generated":{"line":1,"column":1510}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":117,"column":21},"generated":{"line":1,"column":1515}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":117,"column":26},"generated":{"line":1,"column":1516}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":117,"column":29},"generated":{"line":1,"column":1519}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":117,"column":34},"generated":{"line":1,"column":1526}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":117,"column":48},"generated":{"line":1,"column":1528}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":117,"column":52},"generated":{"line":1,"column":1532}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":117,"column":52},"generated":{"line":1,"column":1541}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":117,"column":59},"generated":{"line":1,"column":1544}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":117,"column":59},"generated":{"line":1,"column":1551}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":117,"column":63},"generated":{"line":1,"column":1553}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":118,"column":10},"generated":{"line":1,"column":1559}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":118,"column":17},"generated":{"line":1,"column":1561}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":118,"column":22},"generated":{"line":1,"column":1566}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":118,"column":25},"generated":{"line":1,"column":1570}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":118,"column":17},"generated":{"line":1,"column":1576}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":118,"column":21},"generated":{"line":1,"column":1581}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":118,"column":26},"generated":{"line":1,"column":1582}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":118,"column":29},"generated":{"line":1,"column":1585}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":118,"column":34},"generated":{"line":1,"column":1592}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":118,"column":48},"generated":{"line":1,"column":1594}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":118,"column":52},"generated":{"line":1,"column":1598}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":118,"column":52},"generated":{"line":1,"column":1607}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":118,"column":59},"generated":{"line":1,"column":1610}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":118,"column":59},"generated":{"line":1,"column":1617}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":118,"column":63},"generated":{"line":1,"column":1619}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":120,"column":4},"generated":{"line":1,"column":1625}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":120,"column":12},"generated":{"line":1,"column":1632}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":120,"column":19},"generated":{"line":1,"column":1634}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":119,"column":17},"generated":{"line":1,"column":1638}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":119,"column":22},"generated":{"line":1,"column":1643}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":119,"column":25},"generated":{"line":1,"column":1647}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":119,"column":17},"generated":{"line":1,"column":1653}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":119,"column":21},"generated":{"line":1,"column":1658}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":119,"column":26},"generated":{"line":1,"column":1659}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":119,"column":29},"generated":{"line":1,"column":1662}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":119,"column":34},"generated":{"line":1,"column":1669}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":119,"column":48},"generated":{"line":1,"column":1671}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":119,"column":52},"generated":{"line":1,"column":1675}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":119,"column":52},"generated":{"line":1,"column":1684}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":119,"column":59},"generated":{"line":1,"column":1687}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":119,"column":59},"generated":{"line":1,"column":1694}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":119,"column":63},"generated":{"line":1,"column":1696}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":120,"column":35},"generated":{"line":1,"column":1702}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":122,"column":0},"generated":{"line":1,"column":1706}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":1708}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":31,"column":37},"generated":{"line":1,"column":1709}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":31,"column":37},"generated":{"line":1,"column":1711}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":31,"column":13},"generated":{"line":1,"column":1720}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":31,"column":13},"generated":{"line":1,"column":1728}},{"source":"../../../../../../src/calculators/keypoint_tracker.ts","name":null,"original":{"line":31,"column":13},"generated":{"line":1,"column":1744}}],"sources":{"../../../../../../src/calculators/keypoint_tracker.ts":"/**\r\n * @license\r\n * Copyright 2021 Google LLC. All Rights Reserved.\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * https://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * =============================================================================\r\n */\r\n\r\nimport {Keypoint} from '../shared/calculators/interfaces/common_interfaces';\r\n\r\nimport {Pose} from '../types';\r\n\r\nimport {Track} from './interfaces/common_interfaces';\r\nimport {TrackerConfig} from './interfaces/config_interfaces';\r\nimport {Tracker} from './tracker';\r\n\r\n/**\r\n * KeypointTracker, which tracks poses based on keypoint similarity. This\r\n * tracker assumes that keypoints are provided in normalized image\r\n * coordinates.\r\n */\r\nexport class KeypointTracker extends Tracker {\r\n  private readonly keypointThreshold: number;\r\n  private readonly keypointFalloff: number[];\r\n  private readonly minNumKeyoints: number;\r\n\r\n  constructor(config: TrackerConfig) {\r\n    super(config);\r\n    this.keypointThreshold =\r\n        config.keypointTrackerParams.keypointConfidenceThreshold;\r\n    this.keypointFalloff = config.keypointTrackerParams.keypointFalloff;\r\n    this.minNumKeyoints = config.keypointTrackerParams.minNumberOfKeypoints;\r\n  }\r\n\r\n  /**\r\n   * Computes similarity based on Object Keypoint Similarity (OKS). It's\r\n   * assumed that the keypoints within each `Pose` are in normalized image\r\n   * coordinates. See `Tracker` for more details.\r\n   */\r\n  computeSimilarity(poses: Pose[]): number[][] {\r\n    if (poses.length === 0 || this.tracks.length === 0) {\r\n      return [[]];\r\n    }\r\n\r\n    const simMatrix = [];\r\n    for (const pose of poses) {\r\n      const row = [];\r\n      for (const track of this.tracks) {\r\n        row.push(this.oks(pose, track));\r\n      }\r\n      simMatrix.push(row);\r\n    }\r\n    return simMatrix;\r\n  }\r\n\r\n  /**\r\n   * Computes the Object Keypoint Similarity (OKS) between a pose and track.\r\n   * This is similar in spirit to the calculation used by COCO keypoint eval:\r\n   * https://cocodataset.org/#keypoints-eval\r\n   * In this case, OKS is calculated as:\r\n   * (1/sum_i d(c_i, c_ti)) * \\sum_i exp(-d_i^2/(2*a_ti*x_i^2))*d(c_i, c_ti)\r\n   * where\r\n   *   d(x, y) is an indicator function which only produces 1 if x and y\r\n   *     exceed a given threshold (i.e. keypointThreshold), otherwise 0.\r\n   *   c_i is the confidence of keypoint i from the new pose\r\n   *   c_ti is the confidence of keypoint i from the track\r\n   *   d_i is the Euclidean distance between the pose and track keypoint\r\n   *   a_ti is the area of the track object (the box covering the keypoints)\r\n   *   x_i is a constant that controls falloff in a Gaussian distribution,\r\n   *    computed as 2*keypointFalloff[i].\r\n   * @param pose A `Pose`.\r\n   * @param track A `Track`.\r\n   * @returns The OKS score between the pose and the track. This number is\r\n   * between 0 and 1, and larger values indicate more keypoint similarity.\r\n   */\r\n  private oks(pose: Pose, track: Track): number {\r\n    const boxArea = this.area(track.keypoints) + 1e-6;\r\n    let oksTotal = 0;\r\n    let numValidKeypoints = 0;\r\n    for (let i = 0; i < pose.keypoints.length; ++i) {\r\n      const poseKpt = pose.keypoints[i];\r\n      const trackKpt = track.keypoints[i];\r\n      if (poseKpt.score < this.keypointThreshold ||\r\n          trackKpt.score < this.keypointThreshold) {\r\n        continue;\r\n      }\r\n      numValidKeypoints += 1;\r\n      const dSquared = Math.pow(poseKpt.x - trackKpt.x, 2) +\r\n          Math.pow(poseKpt.y - trackKpt.y, 2);\r\n      const x = 2 * this.keypointFalloff[i];\r\n      oksTotal += Math.exp(-1 * dSquared / (2 * boxArea * x ** 2));\r\n    }\r\n    if (numValidKeypoints < this.minNumKeyoints) {\r\n      return 0.0;\r\n    }\r\n    return oksTotal / numValidKeypoints;\r\n  }\r\n\r\n  /**\r\n   * Computes the area of a bounding box that tightly covers keypoints.\r\n   * @param Keypoint[] An array of `Keypoint`s.\r\n   * @returns The area of the object.\r\n   */\r\n  private area(keypoints: Keypoint[]): number {\r\n    const validKeypoint =\r\n        keypoints.filter(kpt => kpt.score > this.keypointThreshold);\r\n    const minX = Math.min(1.0, ...validKeypoint.map(kpt => kpt.x));\r\n    const maxX = Math.max(0.0, ...validKeypoint.map(kpt => kpt.x));\r\n    const minY = Math.min(1.0, ...validKeypoint.map(kpt => kpt.y));\r\n    const maxY = Math.max(0.0, ...validKeypoint.map(kpt => kpt.y));\r\n    return (maxX - minX) * (maxY - minY);\r\n  }\r\n}\r\n"},"lineCount":null}},"error":null,"hash":"07f6fcb6d13003e691427b868c01df0a","cacheData":{"env":{}}}