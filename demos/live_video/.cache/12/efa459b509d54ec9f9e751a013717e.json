{"id":"node_modules/@tensorflow-models/pose-detection/blazepose_mediapipe/detector.js","dependencies":[{"name":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\blazepose_mediapipe\\detector.js.map","includedInParent":true,"mtime":1634828521833},{"name":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\package.json","includedInParent":true,"mtime":1634830278911},{"name":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\.babelrc","includedInParent":true,"mtime":1634828519177},{"name":"@mediapipe/pose","loc":{"line":54,"column":19},"parent":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\blazepose_mediapipe\\detector.js","resolved":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\node_modules\\@mediapipe\\pose\\pose.js"},{"name":"../constants","loc":{"line":55,"column":26},"parent":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\blazepose_mediapipe\\detector.js","resolved":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\constants.js"},{"name":"./detector_utils","loc":{"line":56,"column":31},"parent":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\blazepose_mediapipe\\detector.js","resolved":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\blazepose_mediapipe\\detector_utils.js"}],"generated":{"js":"\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * @license\r\n * Copyright 2021 Google LLC. All Rights Reserved.\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * https://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * =============================================================================\r\n */\r\nvar pose = require(\"@mediapipe/pose\");\r\nvar constants_1 = require(\"../constants\");\r\nvar detector_utils_1 = require(\"./detector_utils\");\r\n/**\r\n * MediaPipe detector class.\r\n */\r\nvar BlazePoseMediaPipeDetector = /** @class */ (function () {\r\n    // Should not be called outside.\r\n    function BlazePoseMediaPipeDetector(config) {\r\n        var _this = this;\r\n        // This will be filled out by asynchronous calls to onResults. They will be\r\n        // stable after `await send` is called on the pose solution.\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this.selfieMode = false;\r\n        this.poseSolution = new pose.Pose({\r\n            locateFile: function (path, base) {\r\n                if (config.solutionPath) {\r\n                    var solutionPath = config.solutionPath.replace(/\\/+$/, '');\r\n                    return solutionPath + \"/\" + path;\r\n                }\r\n                return base + \"/\" + path;\r\n            }\r\n        });\r\n        var modelComplexity;\r\n        switch (config.modelType) {\r\n            case 'lite':\r\n                modelComplexity = 0;\r\n                break;\r\n            case 'heavy':\r\n                modelComplexity = 2;\r\n                break;\r\n            case 'full':\r\n            default:\r\n                modelComplexity = 1;\r\n                break;\r\n        }\r\n        this.poseSolution.setOptions({\r\n            modelComplexity: modelComplexity,\r\n            smoothLandmarks: config.enableSmoothing || true,\r\n            selfieMode: this.selfieMode,\r\n        });\r\n        this.poseSolution.onResults(function (results) {\r\n            _this.height = results.image.height;\r\n            _this.width = results.image.width;\r\n            if (results.poseLandmarks == null) {\r\n                _this.poses = [];\r\n            }\r\n            else {\r\n                _this.poses = [_this.translateOutput(results.poseLandmarks, results.poseWorldLandmarks)];\r\n            }\r\n        });\r\n    }\r\n    BlazePoseMediaPipeDetector.prototype.translateOutput = function (pose, pose3D) {\r\n        var _this = this;\r\n        var output = {\r\n            keypoints: pose.map(function (landmark, i) { return ({\r\n                x: landmark.x * _this.width,\r\n                y: landmark.y * _this.height,\r\n                z: landmark.z,\r\n                score: landmark.visibility,\r\n                name: constants_1.BLAZEPOSE_KEYPOINTS[i]\r\n            }); })\r\n        };\r\n        if (pose3D != null) {\r\n            output.keypoints3D = pose3D.map(function (landmark, i) { return ({\r\n                x: landmark.x,\r\n                y: landmark.y,\r\n                z: landmark.z,\r\n                score: landmark.visibility,\r\n                name: constants_1.BLAZEPOSE_KEYPOINTS[i]\r\n            }); });\r\n        }\r\n        return output;\r\n    };\r\n    /**\r\n     * Estimates poses for an image or video frame.\r\n     *\r\n     * It returns a single pose or multiple poses based on the maxPose parameter\r\n     * from the `config`.\r\n     *\r\n     * @param image\r\n     * ImageData|HTMLImageElement|HTMLCanvasElement|HTMLVideoElement The input\r\n     * image to feed through the network.\r\n     *\r\n     * @param config Optional.\r\n     *       maxPoses: Optional. Max number of poses to estimate.\r\n     *       When maxPoses = 1, a single pose is detected, it is usually much more\r\n     *       efficient than maxPoses > 1. When maxPoses > 1, multiple poses are\r\n     *       detected.\r\n     *\r\n     *       flipHorizontal: Optional. Default to false. When image data comes\r\n     *       from camera, the result has to flip horizontally.\r\n     *\r\n     *       enableSmoothing: Optional. Default to true. Smooth pose landmarks\r\n     *       coordinates and visibility scores to reduce jitter.\r\n     *\r\n     * @param timestamp Optional. In milliseconds. This is useful when image is\r\n     *     a tensor, which doesn't have timestamp info. Or to override timestamp\r\n     *     in a video.\r\n     *\r\n     * @return An array of `Pose`s.\r\n     */\r\n    BlazePoseMediaPipeDetector.prototype.estimatePoses = function (image, estimationConfig, timestamp) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (estimationConfig && estimationConfig.flipHorizontal &&\r\n                            (estimationConfig.flipHorizontal !== this.selfieMode)) {\r\n                            this.selfieMode = estimationConfig.flipHorizontal;\r\n                            this.poseSolution.setOptions({\r\n                                selfieMode: this.selfieMode,\r\n                            });\r\n                        }\r\n                        return [4 /*yield*/, this.poseSolution.send({ image: image }, timestamp)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/, this.poses];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BlazePoseMediaPipeDetector.prototype.dispose = function () {\r\n        this.poseSolution.close();\r\n    };\r\n    BlazePoseMediaPipeDetector.prototype.reset = function () {\r\n        this.poseSolution.reset();\r\n    };\r\n    BlazePoseMediaPipeDetector.prototype.initialize = function () {\r\n        return this.poseSolution.initialize();\r\n    };\r\n    return BlazePoseMediaPipeDetector;\r\n}());\r\n/**\r\n * Loads the MediaPipe solution.\r\n *\r\n * @param modelConfig ModelConfig object that contains parameters for\r\n * the BlazePose loading process. Please find more details of each parameters\r\n * in the documentation of the `BlazePoseMediaPipeModelConfig` interface.\r\n */\r\nfunction load(modelConfig) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var config, result;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    config = detector_utils_1.validateModelConfig(modelConfig);\r\n                    result = new BlazePoseMediaPipeDetector(config);\r\n                    return [4 /*yield*/, result.initialize()];\r\n                case 1:\r\n                    _a.sent();\r\n                    return [2 /*return*/, result];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.load = load;\r\n"},"sourceMaps":{"js":{"version":3,"file":"detector.js","sourceRoot":"","sources":["../../src/blazepose_mediapipe/detector.ts"],"names":[],"mappings":"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","sourcesContent":[null]}},"error":null,"hash":"dd69e2ea416ef6e90c3632c61381d112","cacheData":{"env":{}}}