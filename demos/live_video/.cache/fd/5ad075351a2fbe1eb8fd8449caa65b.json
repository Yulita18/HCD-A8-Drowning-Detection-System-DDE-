{"id":"kfVK","dependencies":[{"name":"C:\\xampp\\htdocs\\tfjs-models\\pose-detection\\demos\\live_video\\package.json","includedInParent":true,"mtime":1634211906094},{"name":"C:\\xampp\\htdocs\\tfjs-models\\pose-detection\\demos\\live_video\\.babelrc","includedInParent":true,"mtime":1634209725400},{"name":"@tensorflow/tfjs-core","loc":{"line":72,"column":30},"parent":"C:\\xampp\\htdocs\\tfjs-models\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\shared\\calculators\\refine_landmarks_from_heatmap.ts","resolved":"C:\\xampp\\htdocs\\tfjs-models\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow\\tfjs-core\\dist\\index.js"}],"generated":{"js":"\"use strict\";var t=this&&this.__assign||function(){return(t=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},e=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,o){function i(t){try{s(r.next(t))}catch(e){o(e)}}function u(t){try{s(r.throw(t))}catch(e){o(e)}}function s(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,u)}s((r=r.apply(t,e||[])).next())})},n=this&&this.__generator||function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(u){o=[6,u],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};exports.__esModule=!0;var a=r(require(\"@tensorflow/tfjs-core\"));function o(r,o,i){return e(this,void 0,Promise,function(){var e,u,s,l,c,f,h,p,b,m,y,d,w,v,g,x,_,M,k,O,j,P,S,E;return n(this,function(n){switch(n.label){case 0:if(e=a.squeeze(o,[0]),u=e.shape,s=u[0],l=u[1],c=u[2],r.length!==c)throw new Error(\"Expected heatmap to have same number of channels as the number of landmarks. But got landmarks length: \"+r.length+\", heatmap length: \"+c);return f=[],[4,e.buffer()];case 1:for(h=n.sent(),p=0;p<r.length;p++)if(b=r[p],m=t({},b),f.push(m),y=Math.trunc(m.x*l),d=Math.trunc(m.y*s),!(y<0||y>=l||d<0||y>=s)){for(w=Math.trunc((i.kernelSize-1)/2),v=Math.max(0,y-w),g=Math.min(l,y+w+1),x=Math.max(0,d-w),_=Math.min(s,d+w+1),M=0,k=0,O=0,j=0,P=x;P<_;++P)for(S=v;S<g;++S)E=h.get(P,S,p),M+=E,j=Math.max(j,E),k+=S*E,O+=P*E;j>=i.minConfidenceToRefine&&M>0&&(m.x=k/l/M,m.y=O/s/M)}return e.dispose(),[2,f]}})})}exports.refineLandmarksFromHeatmap=o;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":1,"column":1806}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":1,"column":1810}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":1,"column":1812}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":1,"column":1814}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":1,"column":1822}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":1848}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":42,"column":22},"generated":{"line":1,"column":1857}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":43,"column":4},"generated":{"line":1,"column":1859}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":43,"column":27},"generated":{"line":1,"column":1861}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":44,"column":4},"generated":{"line":1,"column":1863}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":44,"column":47},"generated":{"line":1,"column":1887}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":44,"column":54},"generated":{"line":1,"column":1895}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":48,"column":2},"generated":{"line":1,"column":2007}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":46,"column":8},"generated":{"line":1,"column":2010}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":46,"column":25},"generated":{"line":1,"column":2012}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":46,"column":28},"generated":{"line":1,"column":2014}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":46,"column":36},"generated":{"line":1,"column":2022}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":46,"column":51},"generated":{"line":1,"column":2024}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":46,"column":52},"generated":{"line":1,"column":2025}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":47,"column":8},"generated":{"line":1,"column":2029}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":47,"column":42},"generated":{"line":1,"column":2031}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":47,"column":57},"generated":{"line":1,"column":2033}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":47,"column":9},"generated":{"line":1,"column":2039}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":47,"column":17},"generated":{"line":1,"column":2041}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":47,"column":17},"generated":{"line":1,"column":2043}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":47,"column":19},"generated":{"line":1,"column":2046}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":47,"column":26},"generated":{"line":1,"column":2048}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":47,"column":26},"generated":{"line":1,"column":2050}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":47,"column":28},"generated":{"line":1,"column":2053}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":47,"column":38},"generated":{"line":1,"column":2055}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":47,"column":38},"generated":{"line":1,"column":2057}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":48,"column":6},"generated":{"line":1,"column":2060}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":48,"column":16},"generated":{"line":1,"column":2062}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":48,"column":27},"generated":{"line":1,"column":2071}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":49,"column":4},"generated":{"line":1,"column":2073}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":49,"column":10},"generated":{"line":1,"column":2079}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":49,"column":14},"generated":{"line":1,"column":2083}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":50,"column":8},"generated":{"line":1,"column":2089}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":52,"column":11},"generated":{"line":1,"column":2195}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":52,"column":21},"generated":{"line":1,"column":2197}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":52,"column":27},"generated":{"line":1,"column":2204}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":52,"column":48},"generated":{"line":1,"column":2225}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":56,"column":21},"generated":{"line":1,"column":2228}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":55,"column":8},"generated":{"line":1,"column":2235}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":55,"column":23},"generated":{"line":1,"column":2237}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":56,"column":21},"generated":{"line":1,"column":2240}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":56,"column":21},"generated":{"line":1,"column":2241}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":56,"column":27},"generated":{"line":1,"column":2243}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":56,"column":42},"generated":{"line":1,"column":2245}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":58,"column":2},"generated":{"line":1,"column":2262}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":56,"column":8},"generated":{"line":1,"column":2266}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":56,"column":21},"generated":{"line":1,"column":2268}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":56,"column":21},"generated":{"line":1,"column":2270}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":58,"column":11},"generated":{"line":1,"column":2277}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":58,"column":15},"generated":{"line":1,"column":2279}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":58,"column":18},"generated":{"line":1,"column":2281}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":58,"column":22},"generated":{"line":1,"column":2283}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":58,"column":32},"generated":{"line":1,"column":2285}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":58,"column":40},"generated":{"line":1,"column":2292}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":66,"column":4},"generated":{"line":1,"column":2296}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":59,"column":10},"generated":{"line":1,"column":2299}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":59,"column":21},"generated":{"line":1,"column":2301}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":59,"column":31},"generated":{"line":1,"column":2303}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":60,"column":10},"generated":{"line":1,"column":2306}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":60,"column":21},"generated":{"line":1,"column":2308}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":60,"column":21},"generated":{"line":1,"column":2310}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":60,"column":28},"generated":{"line":1,"column":2313}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":61,"column":4},"generated":{"line":1,"column":2316}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":61,"column":17},"generated":{"line":1,"column":2318}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":61,"column":22},"generated":{"line":1,"column":2323}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":63,"column":10},"generated":{"line":1,"column":2326}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":63,"column":22},"generated":{"line":1,"column":2328}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":63,"column":27},"generated":{"line":1,"column":2333}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":63,"column":33},"generated":{"line":1,"column":2339}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":63,"column":45},"generated":{"line":1,"column":2341}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":63,"column":49},"generated":{"line":1,"column":2343}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":64,"column":10},"generated":{"line":1,"column":2346}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":64,"column":22},"generated":{"line":1,"column":2348}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":64,"column":27},"generated":{"line":1,"column":2353}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":64,"column":33},"generated":{"line":1,"column":2359}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":64,"column":45},"generated":{"line":1,"column":2361}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":64,"column":49},"generated":{"line":1,"column":2363}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":66,"column":8},"generated":{"line":1,"column":2368}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":66,"column":20},"generated":{"line":1,"column":2370}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":66,"column":25},"generated":{"line":1,"column":2373}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":66,"column":38},"generated":{"line":1,"column":2376}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":66,"column":49},"generated":{"line":1,"column":2379}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":66,"column":61},"generated":{"line":1,"column":2381}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":67,"column":8},"generated":{"line":1,"column":2384}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":67,"column":21},"generated":{"line":1,"column":2387}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":66,"column":4},"generated":{"line":1,"column":2390}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":86,"column":4},"generated":{"line":1,"column":2391}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":71,"column":10},"generated":{"line":1,"column":2395}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":71,"column":19},"generated":{"line":1,"column":2397}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":71,"column":24},"generated":{"line":1,"column":2402}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":71,"column":31},"generated":{"line":1,"column":2409}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":71,"column":38},"generated":{"line":1,"column":2411}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":71,"column":51},"generated":{"line":1,"column":2422}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":71,"column":56},"generated":{"line":1,"column":2425}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":74,"column":10},"generated":{"line":1,"column":2428}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":74,"column":21},"generated":{"line":1,"column":2430}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":74,"column":26},"generated":{"line":1,"column":2435}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":74,"column":30},"generated":{"line":1,"column":2439}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":74,"column":33},"generated":{"line":1,"column":2441}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":74,"column":45},"generated":{"line":1,"column":2443}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":75,"column":10},"generated":{"line":1,"column":2446}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":75,"column":19},"generated":{"line":1,"column":2448}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":75,"column":24},"generated":{"line":1,"column":2453}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":75,"column":28},"generated":{"line":1,"column":2457}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":75,"column":37},"generated":{"line":1,"column":2459}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":75,"column":49},"generated":{"line":1,"column":2461}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":75,"column":58},"generated":{"line":1,"column":2463}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":76,"column":10},"generated":{"line":1,"column":2466}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":76,"column":21},"generated":{"line":1,"column":2468}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":76,"column":26},"generated":{"line":1,"column":2473}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":76,"column":30},"generated":{"line":1,"column":2477}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":76,"column":33},"generated":{"line":1,"column":2479}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":76,"column":45},"generated":{"line":1,"column":2481}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":77,"column":10},"generated":{"line":1,"column":2484}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":77,"column":19},"generated":{"line":1,"column":2486}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":77,"column":24},"generated":{"line":1,"column":2491}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":77,"column":28},"generated":{"line":1,"column":2495}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":77,"column":38},"generated":{"line":1,"column":2497}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":77,"column":50},"generated":{"line":1,"column":2499}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":77,"column":59},"generated":{"line":1,"column":2501}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":1,"column":2504}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":79,"column":14},"generated":{"line":1,"column":2506}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":80,"column":8},"generated":{"line":1,"column":2508}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":80,"column":22},"generated":{"line":1,"column":2510}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":81,"column":8},"generated":{"line":1,"column":2512}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":81,"column":22},"generated":{"line":1,"column":2514}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":82,"column":8},"generated":{"line":1,"column":2516}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":82,"column":19},"generated":{"line":1,"column":2518}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":86,"column":13},"generated":{"line":1,"column":2520}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":86,"column":19},"generated":{"line":1,"column":2522}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":86,"column":29},"generated":{"line":1,"column":2524}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":86,"column":35},"generated":{"line":1,"column":2526}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":86,"column":45},"generated":{"line":1,"column":2530}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":87,"column":6},"generated":{"line":1,"column":2532}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":87,"column":15},"generated":{"line":1,"column":2536}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":87,"column":21},"generated":{"line":1,"column":2538}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":87,"column":31},"generated":{"line":1,"column":2540}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":87,"column":37},"generated":{"line":1,"column":2542}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":87,"column":47},"generated":{"line":1,"column":2546}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":88,"column":14},"generated":{"line":1,"column":2548}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":88,"column":27},"generated":{"line":1,"column":2550}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":88,"column":38},"generated":{"line":1,"column":2552}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":88,"column":42},"generated":{"line":1,"column":2556}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":88,"column":47},"generated":{"line":1,"column":2558}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":88,"column":52},"generated":{"line":1,"column":2560}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":89,"column":8},"generated":{"line":1,"column":2563}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":89,"column":15},"generated":{"line":1,"column":2566}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":90,"column":8},"generated":{"line":1,"column":2568}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":90,"column":19},"generated":{"line":1,"column":2570}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":90,"column":24},"generated":{"line":1,"column":2575}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":90,"column":28},"generated":{"line":1,"column":2579}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":90,"column":38},"generated":{"line":1,"column":2581}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":91,"column":8},"generated":{"line":1,"column":2584}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":91,"column":23},"generated":{"line":1,"column":2587}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":91,"column":29},"generated":{"line":1,"column":2589}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":92,"column":8},"generated":{"line":1,"column":2591}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":92,"column":23},"generated":{"line":1,"column":2594}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":92,"column":29},"generated":{"line":1,"column":2596}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":95,"column":8},"generated":{"line":1,"column":2598}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":1,"column":2601}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":95,"column":27},"generated":{"line":1,"column":2603}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":95,"column":52},"generated":{"line":1,"column":2626}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":95,"column":58},"generated":{"line":1,"column":2628}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":96,"column":6},"generated":{"line":1,"column":2632}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":96,"column":18},"generated":{"line":1,"column":2634}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":96,"column":22},"generated":{"line":1,"column":2636}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":96,"column":36},"generated":{"line":1,"column":2638}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":96,"column":46},"generated":{"line":1,"column":2640}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":97,"column":6},"generated":{"line":1,"column":2642}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":97,"column":18},"generated":{"line":1,"column":2644}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":97,"column":22},"generated":{"line":1,"column":2646}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":97,"column":36},"generated":{"line":1,"column":2648}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":97,"column":47},"generated":{"line":1,"column":2650}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":103,"column":2},"generated":{"line":1,"column":2653}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":101,"column":2},"generated":{"line":1,"column":2660}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":101,"column":17},"generated":{"line":1,"column":2662}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":103,"column":2},"generated":{"line":1,"column":2672}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":103,"column":2},"generated":{"line":1,"column":2673}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":103,"column":9},"generated":{"line":1,"column":2675}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":2683}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":2691}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":2718}}],"sources":{"node_modules/@tensorflow-models/pose-detection/shared/calculators/refine_landmarks_from_heatmap.ts":"/**\r\n * @license\r\n * Copyright 2021 Google LLC. All Rights Reserved.\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * https://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * =============================================================================\r\n */\r\nimport * as tf from '@tensorflow/tfjs-core';\r\n\r\nimport {Keypoint} from './interfaces/common_interfaces';\r\n\r\nimport {RefineLandmarksFromHeatmapConfig} from './interfaces/config_interfaces';\r\n\r\n/**\r\n * A calculator that refines landmarks using corresponding heatmap area.\r\n *\r\n * High level algorithm\r\n * For each landmark, we replace original value with a value calculated from the\r\n * area in heatmap close to original landmark position (the area is defined by\r\n * config.kernelSize). To calculate new coordinate from heatmap we calculate an\r\n * weighted average inside the kernel. We update the landmark if heatmap is\r\n * confident in it's prediction i.e. max(heatmap) in kernel is at least bigger\r\n * than config.minConfidenceToRefine.\r\n * @param landmarks List of lardmarks to refine.\r\n * @param heatmapTensor The heatmap for the landmarks with shape\r\n *     [height, width, channel]. The channel dimension has to be the same as\r\n *     the number of landmarks.\r\n * @param config The config for refineLandmarksFromHeap,\r\n *     see `RefineLandmarksFromHeatmapConfig` for detail.\r\n *\r\n * @returns Normalized landmarks.\r\n */\r\nexport async function refineLandmarksFromHeatmap(\r\n    landmarks: Keypoint[], heatmapTensor: tf.Tensor4D,\r\n    config: RefineLandmarksFromHeatmapConfig): Promise<Keypoint[]> {\r\n  // tslint:disable-next-line: no-unnecessary-type-assertion\r\n  const $heatmapTensor = tf.squeeze(heatmapTensor, [0]) as tf.Tensor3D;\r\n  const [hmHeight, hmWidth, hmChannels] = $heatmapTensor.shape;\r\n  if (landmarks.length !== hmChannels) {\r\n    throw new Error(\r\n        'Expected heatmap to have same number of channels ' +\r\n        'as the number of landmarks. But got landmarks length: ' +\r\n        `${landmarks.length}, heatmap length: ${hmChannels}`);\r\n  }\r\n\r\n  const outLandmarks = [];\r\n  const heatmapBuf = await $heatmapTensor.buffer();\r\n\r\n  for (let i = 0; i < landmarks.length; i++) {\r\n    const landmark = landmarks[i];\r\n    const outLandmark = {...landmark};\r\n    outLandmarks.push(outLandmark);\r\n\r\n    const centerCol = Math.trunc(outLandmark.x * hmWidth);\r\n    const centerRow = Math.trunc(outLandmark.y * hmHeight);\r\n    // Point is outside of the image let's keep it intact.\r\n    if (centerCol < 0 || centerCol >= hmWidth || centerRow < 0 ||\r\n        centerCol >= hmHeight) {\r\n      continue;\r\n    }\r\n\r\n    const offset = Math.trunc((config.kernelSize - 1) / 2);\r\n    // Calculate area to iterate over. Note that we decrease the kernel on the\r\n    // edges of the heatmap. Equivalent to zero border.\r\n    const beginCol = Math.max(0, centerCol - offset);\r\n    const endCol = Math.min(hmWidth, centerCol + offset + 1);\r\n    const beginRow = Math.max(0, centerRow - offset);\r\n    const endRow = Math.min(hmHeight, centerRow + offset + 1);\r\n\r\n    let sum = 0;\r\n    let weightedCol = 0;\r\n    let weightedRow = 0;\r\n    let maxValue = 0;\r\n\r\n    // Main loop. Go over kernel and calculate weighted sum of coordinates,\r\n    // sum of weights and max weights.\r\n    for (let row = beginRow; row < endRow; ++row) {\r\n      for (let col = beginCol; col < endCol; ++col) {\r\n        const confidence = heatmapBuf.get(row, col, i);\r\n        sum += confidence;\r\n        maxValue = Math.max(maxValue, confidence);\r\n        weightedCol += col * confidence;\r\n        weightedRow += row * confidence;\r\n      }\r\n    }\r\n    if (maxValue >= config.minConfidenceToRefine && sum > 0) {\r\n      outLandmark.x = weightedCol / hmWidth / sum;\r\n      outLandmark.y = weightedRow / hmHeight / sum;\r\n    }\r\n  }\r\n\r\n  $heatmapTensor.dispose();\r\n\r\n  return outLandmarks;\r\n}\r\n"},"lineCount":null}},"error":null,"hash":"05a31c93020d4f6a2f9c41792b12b0c9","cacheData":{"env":{}}}