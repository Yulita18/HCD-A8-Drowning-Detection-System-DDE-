{"id":"node_modules/@tensorflow-models/pose-detection/shared/calculators/calculate_alignment_points_rects.ts","dependencies":[{"name":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\package.json","includedInParent":true,"mtime":1636721533250},{"name":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\.babelrc","includedInParent":true,"mtime":1634828519177},{"name":"./detection_to_rect","loc":{"line":19,"column":34},"parent":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\shared\\calculators\\calculate_alignment_points_rects.ts","resolved":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\shared\\calculators\\detection_to_rect.ts"}],"generated":{"js":"\"use strict\";\r\n/**\r\n * @license\r\n * Copyright 2021 Google LLC. All Rights Reserved.\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * https://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * =============================================================================\r\n */\r\nexports.__esModule = true;\r\nvar detection_to_rect_1 = require(\"./detection_to_rect\");\r\n// ref:\r\n// https://github.com/google/mediapipe/blob/master/mediapipe/calculators/util/alignment_points_to_rects_calculator.cc\r\nfunction calculateAlignmentPointsRects(detection, imageSize, config) {\r\n    var startKeypoint = config.rotationVectorStartKeypointIndex;\r\n    var endKeypoint = config.rotationVectorEndKeypointIndex;\r\n    var locationData = detection.locationData;\r\n    var xCenter = locationData.relativeKeypoints[startKeypoint].x * imageSize.width;\r\n    var yCenter = locationData.relativeKeypoints[startKeypoint].y * imageSize.height;\r\n    var xScale = locationData.relativeKeypoints[endKeypoint].x * imageSize.width;\r\n    var yScale = locationData.relativeKeypoints[endKeypoint].y * imageSize.height;\r\n    // Bounding box size as double distance from center to scale point.\r\n    var boxSize = Math.sqrt((xScale - xCenter) * (xScale - xCenter) +\r\n        (yScale - yCenter) * (yScale - yCenter)) *\r\n        2;\r\n    var rotation = detection_to_rect_1.computeRotation(detection, imageSize, config);\r\n    // Set resulting bounding box.\r\n    return {\r\n        xCenter: xCenter / imageSize.width,\r\n        yCenter: yCenter / imageSize.height,\r\n        width: boxSize / imageSize.width,\r\n        height: boxSize / imageSize.height,\r\n        rotation: rotation\r\n    };\r\n}\r\nexports.calculateAlignmentPointsRects = calculateAlignmentPointsRects;\r\n"},"sourceMaps":{"js":{"version":3,"file":"calculate_alignment_points_rects.js","sourceRoot":"","sources":["node_modules/@tensorflow-models/pose-detection/shared/calculators/calculate_alignment_points_rects.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;;GAeG;;AAEH,yDAAoD;AAMpD,OAAO;AACP,qHAAqH;AACrH,SAAgB,6BAA6B,CACzC,SAAoB,EAAE,SAAoB,EAC1C,MAA6B;IAC/B,IAAM,aAAa,GAAG,MAAM,CAAC,gCAAgC,CAAC;IAC9D,IAAM,WAAW,GAAG,MAAM,CAAC,8BAA8B,CAAC;IAE1D,IAAM,YAAY,GAAG,SAAS,CAAC,YAAY,CAAC;IAC5C,IAAM,OAAO,GACT,YAAY,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC;IACtE,IAAM,OAAO,GACT,YAAY,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,MAAM,CAAC;IAEvE,IAAM,MAAM,GACR,YAAY,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC;IACpE,IAAM,MAAM,GACR,YAAY,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,MAAM,CAAC;IAErE,mEAAmE;IACnE,IAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CACL,CAAC,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,GAAG,OAAO,CAAC;QACvC,CAAC,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,GAAG,OAAO,CAAC,CAAC;QACxD,CAAC,CAAC;IAEN,IAAM,QAAQ,GAAG,mCAAe,CAAC,SAAS,EAAE,SAAS,EAAE,MAAM,CAAC,CAAC;IAE/D,8BAA8B;IAC9B,OAAO;QACL,OAAO,EAAE,OAAO,GAAG,SAAS,CAAC,KAAK;QAClC,OAAO,EAAE,OAAO,GAAG,SAAS,CAAC,MAAM;QACnC,KAAK,EAAE,OAAO,GAAG,SAAS,CAAC,KAAK;QAChC,MAAM,EAAE,OAAO,GAAG,SAAS,CAAC,MAAM;QAClC,QAAQ,UAAA;KACT,CAAC;AACJ,CAAC;AAjCD,sEAiCC","sourcesContent":["/**\r\n * @license\r\n * Copyright 2021 Google LLC. All Rights Reserved.\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * https://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * =============================================================================\r\n */\r\n\r\nimport {computeRotation} from './detection_to_rect';\r\nimport {ImageSize} from './interfaces/common_interfaces';\r\nimport {DetectionToRectConfig} from './interfaces/config_interfaces';\r\nimport {Rect} from './interfaces/shape_interfaces';\r\nimport {Detection} from './interfaces/shape_interfaces';\r\n\r\n// ref:\r\n// https://github.com/google/mediapipe/blob/master/mediapipe/calculators/util/alignment_points_to_rects_calculator.cc\r\nexport function calculateAlignmentPointsRects(\r\n    detection: Detection, imageSize: ImageSize,\r\n    config: DetectionToRectConfig): Rect {\r\n  const startKeypoint = config.rotationVectorStartKeypointIndex;\r\n  const endKeypoint = config.rotationVectorEndKeypointIndex;\r\n\r\n  const locationData = detection.locationData;\r\n  const xCenter =\r\n      locationData.relativeKeypoints[startKeypoint].x * imageSize.width;\r\n  const yCenter =\r\n      locationData.relativeKeypoints[startKeypoint].y * imageSize.height;\r\n\r\n  const xScale =\r\n      locationData.relativeKeypoints[endKeypoint].x * imageSize.width;\r\n  const yScale =\r\n      locationData.relativeKeypoints[endKeypoint].y * imageSize.height;\r\n\r\n  // Bounding box size as double distance from center to scale point.\r\n  const boxSize = Math.sqrt(\r\n                      (xScale - xCenter) * (xScale - xCenter) +\r\n                      (yScale - yCenter) * (yScale - yCenter)) *\r\n      2;\r\n\r\n  const rotation = computeRotation(detection, imageSize, config);\r\n\r\n  // Set resulting bounding box.\r\n  return {\r\n    xCenter: xCenter / imageSize.width,\r\n    yCenter: yCenter / imageSize.height,\r\n    width: boxSize / imageSize.width,\r\n    height: boxSize / imageSize.height,\r\n    rotation\r\n  };\r\n}\r\n"]}},"error":null,"hash":"3b13b18ad5ff36f7e3e7cb4750106aae","cacheData":{"env":{}}}