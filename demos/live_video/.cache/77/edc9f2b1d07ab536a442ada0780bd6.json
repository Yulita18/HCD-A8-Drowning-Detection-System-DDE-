{"id":"qMys","dependencies":[{"name":"C:\\xampp\\htdocs\\tfjs-models\\pose-detection\\demos\\live_video\\package.json","includedInParent":true,"mtime":1634211906094},{"name":"C:\\xampp\\htdocs\\tfjs-models\\pose-detection\\demos\\live_video\\.babelrc","includedInParent":true,"mtime":1634209725400},{"name":"../calculators/get_object_scale","loc":{"line":19,"column":33},"parent":"C:\\xampp\\htdocs\\tfjs-models\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\shared\\filters\\keypoints_smoothing.ts","resolved":"C:\\xampp\\htdocs\\tfjs-models\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\shared\\calculators\\get_object_scale.ts"},{"name":"../calculators/keypoints_to_normalized_keypoints","loc":{"line":20,"column":50},"parent":"C:\\xampp\\htdocs\\tfjs-models\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\shared\\filters\\keypoints_smoothing.ts","resolved":"C:\\xampp\\htdocs\\tfjs-models\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\shared\\calculators\\keypoints_to_normalized_keypoints.ts"},{"name":"../calculators/normalized_keypoints_to_keypoints","loc":{"line":21,"column":50},"parent":"C:\\xampp\\htdocs\\tfjs-models\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\shared\\filters\\keypoints_smoothing.ts","resolved":"C:\\xampp\\htdocs\\tfjs-models\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\shared\\calculators\\normalized_keypoints_to_keypoints.ts"},{"name":"./keypoints_one_euro_filter","loc":{"line":22,"column":42},"parent":"C:\\xampp\\htdocs\\tfjs-models\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\shared\\filters\\keypoints_smoothing.ts","resolved":"C:\\xampp\\htdocs\\tfjs-models\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\shared\\filters\\keypoints_one_euro_filter.ts"},{"name":"./keypoints_velocity_filter","loc":{"line":23,"column":42},"parent":"C:\\xampp\\htdocs\\tfjs-models\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\shared\\filters\\keypoints_smoothing.ts","resolved":"C:\\xampp\\htdocs\\tfjs-models\\pose-detection\\demos\\live_video\\node_modules\\@tensorflow-models\\pose-detection\\shared\\filters\\keypoints_velocity_filter.ts"}],"generated":{"js":"\"use strict\";exports.__esModule=!0;var e=require(\"../calculators/get_object_scale\"),t=require(\"../calculators/keypoints_to_normalized_keypoints\"),i=require(\"../calculators/normalized_keypoints_to_keypoints\"),o=require(\"./keypoints_one_euro_filter\"),r=require(\"./keypoints_velocity_filter\"),l=function(){function l(e){if(null!=e.velocityFilter)this.keypointsFilter=new r.KeypointsVelocityFilter(e.velocityFilter);else{if(null==e.oneEuroFilter)throw new Error(\"Either configure velocityFilter or oneEuroFilter, but got \"+e+\".\");this.keypointsFilter=new o.KeypointsOneEuroFilter(e.oneEuroFilter)}}return l.prototype.apply=function(o,r,l,n,s){if(void 0===n&&(n=!1),null==o)return this.keypointsFilter.reset(),null;var u=null!=s?e.getObjectScale(s,l):1,p=n?i.normalizedKeypointsToKeypoints(o,l):o,y=this.keypointsFilter.apply(p,r,u);return n?t.keypointsToNormalizedKeypoints(y,l):y},l}();exports.KeypointsSmoothingFilter=l;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":35}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":39}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":41}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":49}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":84}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":86}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":94}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":1,"column":146}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":1,"column":148}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":1,"column":156}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":25,"column":0},"generated":{"line":1,"column":208}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":25,"column":0},"generated":{"line":1,"column":210}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":25,"column":0},"generated":{"line":1,"column":218}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":1,"column":249}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":1,"column":251}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":1,"column":259}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":290}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":292}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":34,"column":2},"generated":{"line":1,"column":303}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":34,"column":2},"generated":{"line":1,"column":312}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":34,"column":14},"generated":{"line":1,"column":314}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":35,"column":4},"generated":{"line":1,"column":317}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":35,"column":33},"generated":{"line":1,"column":320}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":35,"column":8},"generated":{"line":1,"column":326}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":35,"column":15},"generated":{"line":1,"column":328}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":36,"column":6},"generated":{"line":1,"column":343}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":36,"column":11},"generated":{"line":1,"column":348}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":36,"column":29},"generated":{"line":1,"column":364}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":36,"column":33},"generated":{"line":1,"column":368}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":36,"column":33},"generated":{"line":1,"column":370}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":36,"column":57},"generated":{"line":1,"column":394}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":36,"column":64},"generated":{"line":1,"column":396}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":37,"column":11},"generated":{"line":1,"column":416}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":37,"column":11},"generated":{"line":1,"column":417}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":37,"column":39},"generated":{"line":1,"column":420}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":37,"column":15},"generated":{"line":1,"column":426}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":37,"column":22},"generated":{"line":1,"column":428}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":40,"column":6},"generated":{"line":1,"column":442}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":40,"column":12},"generated":{"line":1,"column":448}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":40,"column":16},"generated":{"line":1,"column":452}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":41,"column":10},"generated":{"line":1,"column":458}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":42,"column":13},"generated":{"line":1,"column":519}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":42,"column":19},"generated":{"line":1,"column":521}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":38,"column":6},"generated":{"line":1,"column":526}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":38,"column":11},"generated":{"line":1,"column":531}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":38,"column":29},"generated":{"line":1,"column":547}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":38,"column":33},"generated":{"line":1,"column":551}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":38,"column":33},"generated":{"line":1,"column":553}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":38,"column":56},"generated":{"line":1,"column":576}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":38,"column":63},"generated":{"line":1,"column":578}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":81,"column":0},"generated":{"line":1,"column":594}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":60,"column":2},"generated":{"line":1,"column":601}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":60,"column":2},"generated":{"line":1,"column":603}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":60,"column":2},"generated":{"line":1,"column":613}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":60,"column":2},"generated":{"line":1,"column":619}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":61,"column":6},"generated":{"line":1,"column":628}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":61,"column":29},"generated":{"line":1,"column":630}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":61,"column":48},"generated":{"line":1,"column":632}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":62,"column":6},"generated":{"line":1,"column":634}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":62,"column":26},"generated":{"line":1,"column":636}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":63,"column":4},"generated":{"line":1,"column":639}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":62,"column":6},"generated":{"line":1,"column":647}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":62,"column":6},"generated":{"line":1,"column":651}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":62,"column":6},"generated":{"line":1,"column":655}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":62,"column":6},"generated":{"line":1,"column":658}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":63,"column":21},"generated":{"line":1,"column":661}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":63,"column":8},"generated":{"line":1,"column":667}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":65,"column":6},"generated":{"line":1,"column":669}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":64,"column":6},"generated":{"line":1,"column":676}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":64,"column":11},"generated":{"line":1,"column":681}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":64,"column":27},"generated":{"line":1,"column":697}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":65,"column":13},"generated":{"line":1,"column":705}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":68,"column":4},"generated":{"line":1,"column":710}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":68,"column":10},"generated":{"line":1,"column":714}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":69,"column":26},"generated":{"line":1,"column":716}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":69,"column":8},"generated":{"line":1,"column":722}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":69,"column":33},"generated":{"line":1,"column":724}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":69,"column":33},"generated":{"line":1,"column":726}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":69,"column":48},"generated":{"line":1,"column":741}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":69,"column":64},"generated":{"line":1,"column":743}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":69,"column":77},"generated":{"line":1,"column":746}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":71,"column":10},"generated":{"line":1,"column":748}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":71,"column":28},"generated":{"line":1,"column":750}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":72,"column":8},"generated":{"line":1,"column":752}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":72,"column":8},"generated":{"line":1,"column":754}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":72,"column":39},"generated":{"line":1,"column":785}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":72,"column":50},"generated":{"line":1,"column":787}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":73,"column":8},"generated":{"line":1,"column":790}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":74,"column":10},"generated":{"line":1,"column":792}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":75,"column":8},"generated":{"line":1,"column":794}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":75,"column":13},"generated":{"line":1,"column":799}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":75,"column":29},"generated":{"line":1,"column":815}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":75,"column":35},"generated":{"line":1,"column":821}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":75,"column":52},"generated":{"line":1,"column":823}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":75,"column":63},"generated":{"line":1,"column":825}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":77,"column":4},"generated":{"line":1,"column":828}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":77,"column":11},"generated":{"line":1,"column":835}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":78,"column":8},"generated":{"line":1,"column":837}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":78,"column":8},"generated":{"line":1,"column":839}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":78,"column":39},"generated":{"line":1,"column":870}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":78,"column":64},"generated":{"line":1,"column":872}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":1,"column":875}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":81,"column":0},"generated":{"line":1,"column":878}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":880}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":31,"column":13},"generated":{"line":1,"column":883}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":31,"column":13},"generated":{"line":1,"column":891}},{"source":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts","name":null,"original":{"line":31,"column":13},"generated":{"line":1,"column":916}}],"sources":{"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_smoothing.ts":"/**\r\n * @license\r\n * Copyright 2021 Google LLC. All Rights Reserved.\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * https://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * =============================================================================\r\n */\r\n\r\nimport {getObjectScale} from '../calculators/get_object_scale';\r\nimport {ImageSize, Keypoint, KeypointsFilter} from '../calculators/interfaces/common_interfaces';\r\nimport {KeypointsSmoothingConfig} from '../calculators/interfaces/config_interfaces';\r\nimport {Rect} from '../calculators/interfaces/shape_interfaces';\r\nimport {keypointsToNormalizedKeypoints} from '../calculators/keypoints_to_normalized_keypoints';\r\nimport {normalizedKeypointsToKeypoints} from '../calculators/normalized_keypoints_to_keypoints';\r\n\r\nimport {KeypointsOneEuroFilter} from './keypoints_one_euro_filter';\r\nimport {KeypointsVelocityFilter} from './keypoints_velocity_filter';\r\n\r\n/**\r\n * A Calculator to smooth keypoints over time.\r\n */\r\nexport class KeypointsSmoothingFilter {\r\n  private readonly keypointsFilter: KeypointsFilter;\r\n\r\n  constructor(config: KeypointsSmoothingConfig) {\r\n    if (config.velocityFilter != null) {\r\n      this.keypointsFilter = new KeypointsVelocityFilter(config.velocityFilter);\r\n    } else if (config.oneEuroFilter != null) {\r\n      this.keypointsFilter = new KeypointsOneEuroFilter(config.oneEuroFilter);\r\n    } else {\r\n      throw new Error(\r\n          'Either configure velocityFilter or oneEuroFilter, but got ' +\r\n          `${config}.`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Apply one of the stateful `KeypointsFilter` to keypoints.\r\n   *\r\n   * Currently supports `OneEuroFilter` and `VelocityFilter`.\r\n   * @param keypoints A list of 2D or 3D keypoints, can be normalized or\r\n   *     non-normalized.\r\n   * @param timestamp The timestamp of the video frame.\r\n   * @param imageSize Optional. The imageSize is useful when keypoints are\r\n   *     normalized.\r\n   * @param normalized Optional. Whether the keypoints are normalized. Default\r\n   *     to false.\r\n   * @param objectScaleROI Optional. The auxiliary ROI to calculate object\r\n   *     scale. If not set, objectScale defaults to 1.\r\n   */\r\n  apply(\r\n      keypoints: Keypoint[], timestamp: number, imageSize?: ImageSize,\r\n      normalized = false, objectScaleROI?: Rect): Keypoint[] {\r\n    if (keypoints == null) {\r\n      this.keypointsFilter.reset();\r\n      return null;\r\n    }\r\n\r\n    const objectScale =\r\n        objectScaleROI != null ? getObjectScale(objectScaleROI, imageSize) : 1;\r\n\r\n    const scaledKeypoints = normalized ?\r\n        normalizedKeypointsToKeypoints(keypoints, imageSize) :\r\n        keypoints;\r\n    const scaledKeypointsFiltered =\r\n        this.keypointsFilter.apply(scaledKeypoints, timestamp, objectScale);\r\n\r\n    return normalized ?\r\n        keypointsToNormalizedKeypoints(scaledKeypointsFiltered, imageSize) :\r\n        scaledKeypointsFiltered;\r\n  }\r\n}\r\n"},"lineCount":null}},"error":null,"hash":"16ebe519f4f264b491c4bf8f64ed6665","cacheData":{"env":{}}}