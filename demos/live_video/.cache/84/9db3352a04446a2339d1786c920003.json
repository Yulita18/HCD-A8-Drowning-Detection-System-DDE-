{"id":"node_modules/@tensorflow-models/pose-detection/shared/calculators/remove_detection_letterbox.ts","dependencies":[{"name":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\package.json","includedInParent":true,"mtime":1636721533250},{"name":"C:\\xampp\\htdocs\\pose-detection\\demos\\live_video\\.babelrc","includedInParent":true,"mtime":1634828519177}],"generated":{"js":"\"use strict\";\r\n/**\r\n * @license\r\n * Copyright 2021 Google LLC. All Rights Reserved.\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * https://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * =============================================================================\r\n */\r\nexports.__esModule = true;\r\n/**\r\n * Adjusts detection locations on the letterboxed image to the corresponding\r\n * locations on the same image with the letterbox removed (the input image to\r\n * the graph before image transformation).\r\n *\r\n * @param detections A list of detection boxes on an letterboxed image.\r\n * @param letterboxPadding A `padding` object representing the letterbox padding\r\n *     from the 4 sides: left, top, right, bottom, of the letterboxed image,\r\n *     normalized by the letterboxed image dimensions.\r\n * @returns detections: A list of detection boxes representing detections with\r\n *     their locations adjusted to the letterbox-removed (non-padded) image.\r\n */\r\n// ref:\r\n// https://github.com/google/mediapipe/blob/master/mediapipe/calculators/util/detection_letterbox_removal_calculator.cc\r\nfunction removeDetectionLetterbox(detections, letterboxPadding) {\r\n    if (detections === void 0) { detections = []; }\r\n    var left = letterboxPadding.left;\r\n    var top = letterboxPadding.top;\r\n    var leftAndRight = letterboxPadding.left + letterboxPadding.right;\r\n    var topAndBottom = letterboxPadding.top + letterboxPadding.bottom;\r\n    for (var i = 0; i < detections.length; i++) {\r\n        var detection = detections[i];\r\n        var relativeBoundingBox = detection.locationData.relativeBoundingBox;\r\n        var xMin = (relativeBoundingBox.xMin - left) / (1 - leftAndRight);\r\n        var yMin = (relativeBoundingBox.yMin - top) / (1 - topAndBottom);\r\n        var width = relativeBoundingBox.width / (1 - leftAndRight);\r\n        var height = relativeBoundingBox.height / (1 - topAndBottom);\r\n        relativeBoundingBox.xMin = xMin;\r\n        relativeBoundingBox.yMin = yMin;\r\n        relativeBoundingBox.width = width;\r\n        relativeBoundingBox.height = height;\r\n        for (var i_1 = 0; i_1 < detection.locationData.relativeKeypoints.length; ++i_1) {\r\n            var keypoint = detection.locationData.relativeKeypoints[i_1];\r\n            var newX = (keypoint.x - left) / (1 - leftAndRight);\r\n            var newY = (keypoint.y - top) / (1 - topAndBottom);\r\n            keypoint.x = newX;\r\n            keypoint.y = newY;\r\n        }\r\n    }\r\n    return detections;\r\n}\r\nexports.removeDetectionLetterbox = removeDetectionLetterbox;\r\n"},"sourceMaps":{"js":{"version":3,"file":"remove_detection_letterbox.js","sourceRoot":"","sources":["node_modules/@tensorflow-models/pose-detection/shared/calculators/remove_detection_letterbox.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;;GAeG;;AAKH;;;;;;;;;;;GAWG;AACH,OAAO;AACP,uHAAuH;AACvH,SAAgB,wBAAwB,CACpC,UAA4B,EAAE,gBAAyB;IAAvD,2BAAA,EAAA,eAA4B;IAC9B,IAAM,IAAI,GAAG,gBAAgB,CAAC,IAAI,CAAC;IACnC,IAAM,GAAG,GAAG,gBAAgB,CAAC,GAAG,CAAC;IACjC,IAAM,YAAY,GAAG,gBAAgB,CAAC,IAAI,GAAG,gBAAgB,CAAC,KAAK,CAAC;IACpE,IAAM,YAAY,GAAG,gBAAgB,CAAC,GAAG,GAAG,gBAAgB,CAAC,MAAM,CAAC;IAEpE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QAC1C,IAAM,SAAS,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;QAChC,IAAM,mBAAmB,GAAG,SAAS,CAAC,YAAY,CAAC,mBAAmB,CAAC;QACvE,IAAM,IAAI,GAAG,CAAC,mBAAmB,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,YAAY,CAAC,CAAC;QACpE,IAAM,IAAI,GAAG,CAAC,mBAAmB,CAAC,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,YAAY,CAAC,CAAC;QACnE,IAAM,KAAK,GAAG,mBAAmB,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,YAAY,CAAC,CAAC;QAC7D,IAAM,MAAM,GAAG,mBAAmB,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,YAAY,CAAC,CAAC;QAC/D,mBAAmB,CAAC,IAAI,GAAG,IAAI,CAAC;QAChC,mBAAmB,CAAC,IAAI,GAAG,IAAI,CAAC;QAChC,mBAAmB,CAAC,KAAK,GAAG,KAAK,CAAC;QAClC,mBAAmB,CAAC,MAAM,GAAG,MAAM,CAAC;QAEpC,KAAK,IAAI,GAAC,GAAG,CAAC,EAAE,GAAC,GAAG,SAAS,CAAC,YAAY,CAAC,iBAAiB,CAAC,MAAM,EAAE,EAAE,GAAC,EAAE;YACxE,IAAM,QAAQ,GAAG,SAAS,CAAC,YAAY,CAAC,iBAAiB,CAAC,GAAC,CAAC,CAAC;YAC7D,IAAM,IAAI,GAAG,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,YAAY,CAAC,CAAC;YACtD,IAAM,IAAI,GAAG,CAAC,QAAQ,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,YAAY,CAAC,CAAC;YACrD,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC;YAClB,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC;SACnB;KACF;IAED,OAAO,UAAU,CAAC;AACpB,CAAC;AA7BD,4DA6BC","sourcesContent":["/**\r\n * @license\r\n * Copyright 2021 Google LLC. All Rights Reserved.\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * https://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * =============================================================================\r\n */\r\n\r\nimport {Padding} from './interfaces/common_interfaces';\r\nimport {Detection} from './interfaces/shape_interfaces';\r\n\r\n/**\r\n * Adjusts detection locations on the letterboxed image to the corresponding\r\n * locations on the same image with the letterbox removed (the input image to\r\n * the graph before image transformation).\r\n *\r\n * @param detections A list of detection boxes on an letterboxed image.\r\n * @param letterboxPadding A `padding` object representing the letterbox padding\r\n *     from the 4 sides: left, top, right, bottom, of the letterboxed image,\r\n *     normalized by the letterboxed image dimensions.\r\n * @returns detections: A list of detection boxes representing detections with\r\n *     their locations adjusted to the letterbox-removed (non-padded) image.\r\n */\r\n// ref:\r\n// https://github.com/google/mediapipe/blob/master/mediapipe/calculators/util/detection_letterbox_removal_calculator.cc\r\nexport function removeDetectionLetterbox(\r\n    detections: Detection[] = [], letterboxPadding: Padding): Detection[] {\r\n  const left = letterboxPadding.left;\r\n  const top = letterboxPadding.top;\r\n  const leftAndRight = letterboxPadding.left + letterboxPadding.right;\r\n  const topAndBottom = letterboxPadding.top + letterboxPadding.bottom;\r\n\r\n  for (let i = 0; i < detections.length; i++) {\r\n    const detection = detections[i];\r\n    const relativeBoundingBox = detection.locationData.relativeBoundingBox;\r\n    const xMin = (relativeBoundingBox.xMin - left) / (1 - leftAndRight);\r\n    const yMin = (relativeBoundingBox.yMin - top) / (1 - topAndBottom);\r\n    const width = relativeBoundingBox.width / (1 - leftAndRight);\r\n    const height = relativeBoundingBox.height / (1 - topAndBottom);\r\n    relativeBoundingBox.xMin = xMin;\r\n    relativeBoundingBox.yMin = yMin;\r\n    relativeBoundingBox.width = width;\r\n    relativeBoundingBox.height = height;\r\n\r\n    for (let i = 0; i < detection.locationData.relativeKeypoints.length; ++i) {\r\n      const keypoint = detection.locationData.relativeKeypoints[i];\r\n      const newX = (keypoint.x - left) / (1 - leftAndRight);\r\n      const newY = (keypoint.y - top) / (1 - topAndBottom);\r\n      keypoint.x = newX;\r\n      keypoint.y = newY;\r\n    }\r\n  }\r\n\r\n  return detections;\r\n}\r\n"]}},"error":null,"hash":"1f5480c66c10dedae6cb08a5e0a54712","cacheData":{"env":{}}}